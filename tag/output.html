<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input Output · Plotting in pure Julia</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Plotting in pure Julia</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="scene.html">Scene</a></li><li><a class="toctext" href="conversions.html">Conversions</a></li><li><a class="toctext" href="functions.html">Functions</a></li><li><a class="toctext" href="documentation.html">Documentation</a></li><li><a class="toctext" href="backends.html">Backends</a></li><li><a class="toctext" href="extending.html">Extending</a></li><li><a class="toctext" href="themes.html">Themes</a></li><li><a class="toctext" href="interaction.html">Interaction</a></li><li><a class="toctext" href="axis.html">Axis</a></li><li><a class="toctext" href="legends.html">Legends</a></li><li class="current"><a class="toctext" href="output.html">Input Output</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#VideoStream-1">VideoStream</a></li></ul></li><li><a class="toctext" href="reflection.html">Reflection</a></li><li><a class="toctext" href="layout.html">Layouting</a></li></ul></li><li><span class="toctext">Developper Documentation</span><ul><li><a class="toctext" href="devdocs.html">Devdocs</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Basics</li><li><a href="output.html">Input Output</a></li></ul><a class="edit-page" href="https://github.com/SimonDanisch/Makie.jl/blob/master/docs\\src\\output.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Input Output</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Input-Output-1" href="#Input-Output-1">Input Output</a></h1><p>Makie overloads the FileIO interface. So you can just write e.g.:</p><pre><code class="language-Julia">save(scene, &quot;test.png&quot;)
save(scene, &quot;test.jpg&quot;)</code></pre><p>There is also the option to save a plot as a Julia File (not implemented yet)</p><pre><code class="language-Julia">save(scene, &quot;test.jl&quot;)</code></pre><p>This will try to reproduce the plotting commands as closely as possible to recreate the current scene. You can specify if you want to save the defaults explicitly or if you not want to store them, so that whenever you change defaults and the saved code gets loaded it will take the new defaults.</p><h1><a class="nav-anchor" id="VideoStream-1" href="#VideoStream-1">VideoStream</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Makie.VideoStream" href="#Makie.VideoStream"><code>Makie.VideoStream</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">VideoStream(scene::Scene, dir = mktempdir(), name = &quot;video&quot;)</code></pre><p>returns a stream and a buffer that you can use to not allocate for new frames. Use <code>add_frame!(stream, window, buffer)</code> to add new video frames to the stream. Use <code>finish(stream)</code> to save the video to &#39;dir/name.mkv&#39;. You can also call <code>finish(stream, &quot;mkv&quot;)</code>, <code>finish(stream, &quot;mp4&quot;)</code>, <code>finish(stream, &quot;gif&quot;)</code> or <code>finish(stream, &quot;webm&quot;)</code> to convert the stream to those formats.</p></div><a class="source-link" target="_blank" href="https://github.com/SimonDanisch/Makie.jl/blob/4744bf3ec578486260d23ec9556c1e4a0ca83312/src\\plotsbase\\output.jl#L62-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Makie.finish" href="#Makie.finish"><code>Makie.finish</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">finish(io::VideoStream, typ = &quot;mkv&quot;; remove_mkv = true)</code></pre><p>Flushes the video stream and optionally converts the file to <code>typ</code> which can be (<code>mkv</code> is default and doesn&#39;t need convert) gif, mp4 and webm. If you want to convert the original mkv to multiple formats you should choose <code>remove_mkv = false</code>, and remove it manually after you&#39;re done (with <code>rm(videostream.path)</code>) webm yields the smallest file size, mp4 and mk4 are marginally bigger and gifs are up to 6 times bigger!</p></div><a class="source-link" target="_blank" href="https://github.com/SimonDanisch/Makie.jl/blob/4744bf3ec578486260d23ec9556c1e4a0ca83312/src\\plotsbase\\output.jl#L97-L106">source</a></section><div><pre><code class="language-julia">using Makie

scene = Scene(resolution = (500, 500))

f(t, v, s) = (sin(v + t) * s, cos(v + t) * s, (cos(v + t) + sin(v)) * s)
t = to_node(time()) # create a life signal
p1 = meshscatter(lift_node(t-&gt; f.(t, linspace(0, 2pi, 50), 1), t))
p2 = meshscatter(lift_node(t-&gt; f.(t * 2.0, linspace(0, 2pi, 50), 1.5), t))
center!(scene)
nothing
# you can now reference to life attributes from the above plots:

lines = lift_node(p1[:positions], p2[:positions]) do pos1, pos2
    map((a, b)-&gt; (a, b), pos1, pos2)
end

linesegment(lines, linestyle = :dot)

center!(scene)
# record a video
io = VideoStream(scene, &quot;.&quot;, &quot;output_vid&quot;)
for i = 1:300
    push!(t, time())
    recordframe!(io)
    yield()
    sleep(1/30)
end
finish(io, &quot;mp4&quot;) # could also be gif, webm or mkv
nothing</code></pre></div><video controls autoplay>
  <source src="output_vid.mp4" type="video/mp4">
  Your browser does not support mp4. Please use a modern browser like Chrome or Firefox.
</video><footer><hr/><a class="previous" href="legends.html"><span class="direction">Previous</span><span class="title">Legends</span></a><a class="next" href="reflection.html"><span class="direction">Next</span><span class="title">Reflection</span></a></footer></article></body></html>
